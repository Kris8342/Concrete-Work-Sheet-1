<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Concrete Job Form</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    body {
      background-color: #f0f4f8;
      color: #333;
      line-height: 1.6;
      padding: 20px;
    }
    
    .container {
      max-width: 1000px;
      margin: 0 auto;
      background: white;
      border-radius: 12px;
      box-shadow: 0 5px 25px rgba(0,0,0,0.1);
      overflow: hidden;
    }
    
    header {
      background: linear-gradient(135deg, #1a3a5f, #2c5282);
      color: white;
      padding: 25px;
      text-align: center;
      position: relative;
    }
    
    .logo {
      font-size: 28px;
      font-weight: bold;
      margin-bottom: 5px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }
    
    .logo i {
      font-size: 32px;
    }
    
    .form-title {
      font-size: 22px;
      font-weight: 500;
      margin-top: 10px;
      opacity: 0.9;
    }
    
    .form-container {
      padding: 25px;
    }
    
    .form-section {
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 1px solid #e2e8f0;
    }
    
    .section-title {
      font-size: 20px;
      font-weight: 600;
      color: #2c5282;
      margin-bottom: 20px;
      padding-bottom: 8px;
      border-bottom: 2px solid #cbd5e0;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .section-title i {
      font-size: 24px;
    }
    
    .grid-2 {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }
    
    .input-group {
      margin-bottom: 15px;
    }
    
    label {
      display: block;
      margin-bottom: 6px;
      font-weight: 600;
      color: #4a5568;
      font-size: 15px;
    }
    
    .dual-label {
      display: flex;
      justify-content: space-between;
    }
    
    input, select, textarea {
      width: 100%;
      padding: 12px 15px;
      border: 1px solid #cbd5e0;
      border-radius: 8px;
      font-size: 15px;
      transition: all 0.3s ease;
      background-color: #f8fafc;
    }
    
    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: #4299e1;
      box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.2);
      background-color: white;
    }
    
    textarea {
      min-height: 100px;
      resize: vertical;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
      background: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }
    
    th {
      background-color: #2c5282;
      color: white;
      font-weight: 500;
      padding: 12px 15px;
      text-align: left;
    }
    
    td {
      padding: 12px 15px;
      border-bottom: 1px solid #e2e8f0;
    }
    
    tr:last-child td {
      border-bottom: none;
    }
    
    tr:nth-child(even) {
      background-color: #f8fafc;
    }
    
    .checkbox-group {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin: 15px 0;
    }
    
    .checkbox-item {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .checkbox-item input {
      width: auto;
    }
    
    .btn {
      padding: 12px 25px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    
    .btn i {
      font-size: 18px;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #2b6cb0, #4299e1);
      color: white;
    }
    
    .btn-primary:hover {
      background: linear-gradient(135deg, #2c5282, #3182ce);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(66, 153, 225, 0.3);
    }
    
    .btn-danger {
      background: #e53e3e;
      color: white;
    }
    
    .btn-danger:hover {
      background: #c53030;
      transform: translateY(-2px);
    }
    
    .btn-group {
      display: flex;
      gap: 15px;
      margin-top: 20px;
      flex-wrap: wrap;
    }
    
    .section {
      background: white;
      border: 1px solid #e2e8f0;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 25px;
      position: relative;
      box-shadow: 0 2px 10px rgba(0,0,0,0.03);
    }
    
    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    
    .section-number {
      font-size: 20px;
      font-weight: 700;
      color: #2c5282;
    }
    
    .no-print {
      display: inline-block;
    }
    
    .footer {
      text-align: center;
      padding: 20px;
      color: #718096;
      font-size: 14px;
      border-top: 1px solid #e2e8f0;
      margin-top: 30px;
    }
    
    /* Print styles */
    @media print {
      body {
        padding: 0;
        background: white;
      }
      
      .no-print {
        display: none !important;
      }
      
      .container {
        max-width: 100%;
        box-shadow: none;
        border-radius: 0;
      }
      
      header {
        padding: 15px;
      }
      
      .form-container {
        padding: 15px;
      }
      
      .section-title {
        font-size: 16px;
      }
      
      .grid-2 {
        display: block;
      }
      
      .input-group {
        margin-bottom: 10px;
      }
      
      table {
        font-size: 12px;
      }
      
      th, td {
        padding: 8px 10px;
      }
      
      .btn-group {
        display: none;
      }
    }
    
    /* Mobile optimizations */
    @media (max-width: 768px) {
      .form-container {
        padding: 15px;
      }
      
      .grid-2 {
        grid-template-columns: 1fr;
        gap: 10px;
      }
      
      .btn {
        width: 100%;
        justify-content: center;
      }
      
      .btn-group {
        flex-direction: column;
      }
    }
    
    /* Icons */
    .icon {
      display: inline-block;
      width: 24px;
      height: 24px;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="container" id="form-root">
    <header>
      <div class="logo">
        <i>üèóÔ∏è</i>
        <span>CONCRETE PRO</span>
      </div>
      <div class="form-title">Concrete Job Documentation Form</div>
    </header>
    
    <div class="form-container">
      <!-- Job Information -->
      <div class="form-section">
        <h2 class="section-title">
          <i>üìã</i> Job Information
        </h2>
        
        <div class="grid-2">
          <div class="input-group">
            <label for="name">Name / Nombre</label>
            <input type="text" id="name">
          </div>
          
          <div class="input-group">
            <label for="date">Date Poured / Fecha Vaciado</label>
            <input type="text" id="date" value="">
          </div>
          
          <div class="input-group">
            <label for="address">Job Address / Direcci√≥n del Trabajo</label>
            <input type="text" id="address">
          </div>
          
          <div class="input-group">
            <label for="customer">Customer / Cliente</label>
            <input type="text" id="customer">
          </div>
        </div>
      </div>
      
      <!-- Concrete Sections -->
      <div class="form-section">
        <h2 class="section-title">
          <i>üß±</i> Concrete Sections
        </h2>
        
        <div id="sections-container">
          <div class="section" id="section-1">
            <div class="section-header">
              <div class="section-number">Section 1</div>
              <button class="btn btn-danger no-print" onclick="removeSection(this.parentNode.parentNode)">
                Remove Section
              </button>
            </div>
            
            <div class="grid-2">
              <div class="input-group">
                <label>Length (ft) / Largo (pies)</label>
                <input type="number" step="100" min="0">
              </div>
              
              <div class="input-group">
                <label>Width (in) / Ancho (pulg)</label>
                <input type="number" step="6" min="0">
              </div>
              
              <div class="input-group">
                <label>Depth (in) / Profundidad (pulg)</label>
                <input type="number" step="6" min="0">
              </div>
            </div>
            
            <h3 class="subsection-title">Uprights / Verticales</h3>
            <div class="grid-2">
              <div class="input-group">
                <label>Quantity / Cantidad</label>
                <input type="number" step="5" min="0">
              </div>
              
              <div class="input-group">
                <label>Length (ft) / Largo (pies)</label>
                <input type="number" step="1" min="0">
              </div>
            </div>
            
            <h3 class="subsection-title">Crossbars / Travesa√±os</h3>
            <div class="grid-2">
              <div class="input-group">
                <label>Quantity / Cantidad</label>
                <input type="number" step="5" min="0">
              </div>
              
              <div class="input-group">
                <label>Length (ft) / Largo (pies)</label>
                <input type="number" step="1" min="0">
              </div>
            </div>
            
            <h3 class="subsection-title">Mat Type</h3>
            <div class="checkbox-group">
              <div class="checkbox-item">
                <input type="checkbox" id="single-mat-1">
                <label for="single-mat-1">Single Mat / Malla Simple</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="double-mat-1">
                <label for="double-mat-1">Double Mat / Malla Doble</label>
              </div>
            </div>
            
            <h3 class="subsection-title">Rebar Details</h3>
            <div class="grid-2">
              <div class="input-group">
                <label>Rebar Qty / Cant. Varilla</label>
                <input type="number" step="10" min="0">
              </div>
              
              <div class="input-group">
                <label>Size / Tama√±o</label>
                <select>
                  <option>#4</option>
                  <option>#5</option>
                  <option>#6</option>
                  <option>#7</option>
                  <option>#8</option>
                  <option>#9</option>
                  <option>#10</option>
                </select>
              </div>
            </div>
            
            <h3 class="subsection-title">Additional Elements</h3>
            <div class="grid-2">
              <div class="input-group">
                <label>Fireplace / Chimenea</label>
                <input type="text">
              </div>
              
              <div class="input-group">
                <label>Porch Pad / Base Porche</label>
                <input type="text">
              </div>
            </div>
            
            <div class="input-group">
              <label>Section Notes / Notas Secci√≥n</label>
              <textarea></textarea>
            </div>
          </div>
        </div>
        
        <div class="btn-group">
          <button class="btn btn-primary no-print" onclick="addSection()">
            <i>‚ûï</i> Add Section
          </button>
        </div>
      </div>
      
      <!-- Concrete Information -->
      <div class="form-section">
        <h2 class="section-title">
          <i>üèóÔ∏è</i> Concrete Information
        </h2>
        
        <div class="grid-2">
          <div class="input-group">
            <label>Concrete Company</label>
            <select id="concrete-company">
              <option value="">Select a company</option>
              <option value="imi">IMI</option>
              <option value="srm">SRM</option>
              <option value="other">Other</option>
            </select>
          </div>
          
          <div class="input-group">
            <label>Other Company</label>
            <input type="text" id="other-company" disabled>
          </div>
          
          <div class="input-group">
            <label>Yards Poured / Yardas Vertidas</label>
            <input type="number" step="10" min="0">
          </div>
          
          <div class="input-group">
            <label>Strength (psi) / Resistencia (psi)</label>
            <select>
              <option>3000</option>
              <option>3500</option>
              <option>4000</option>
              <option>4500</option>
              <option>5000</option>
            </select>
          </div>
        </div>
        
        <div class="input-group">
          <label>Additives / Aditivos</label>
          <input type="text">
        </div>
      </div>
      
      <!-- Equipment & Hours -->
      <div class="form-section">
        <h2 class="section-title">
          <i>‚è±Ô∏è</i> Equipment & Hours
        </h2>
        
        <table id="equipment-table">
          <thead>
            <tr>
              <th>Equipment / Equipo</th>
              <th>Hours / Horas</th>
              <th>Notes / Notas</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><input type="text" value="Mini Excavator"></td>
              <td>
                <select class="hour-select">
                  <option>0</option>
                  <option>0.5</option>
                  <option>1.0</option>
                  <option>1.5</option>
                  <option>2.0</option>
                  <option>2.5</option>
                  <option>3.0</option>
                  <option>3.5</option>
                  <option>4.0</option>
                  <option>4.5</option>
                  <option>5.0</option>
                  <option>5.5</option>
                  <option>6.0</option>
                  <option>6.5</option>
                  <option>7.0</option>
                  <option>7.5</option>
                  <option>8.0</option>
                </select>
              </td>
              <td><input type="text"></td>
            </tr>
            <tr>
              <td><input type="text" value="Skid Steer"></td>
              <td>
                <select class="hour-select">
                  <option>0</option>
                  <option>0.5</option>
                  <option>1.0</option>
                  <option>1.5</option>
                  <option>2.0</option>
                  <option>2.5</option>
                  <option>3.0</option>
                  <option>3.5</option>
                  <option>4.0</option>
                  <option>4.5</option>
                  <option>5.0</option>
                  <option>5.5</option>
                  <option>6.0</option>
                  <option>6.5</option>
                  <option>7.0</option>
                  <option>7.5</option>
                  <option>8.0</option>
                </select>
              </td>
              <td><input type="text"></td>
            </tr>
          </tbody>
        </table>
        
        <div class="btn-group">
          <button class="btn btn-primary no-print" onclick="addEquipmentRow()">
            <i>‚ûï</i> Add Equipment
          </button>
        </div>
      </div>
      
      <!-- Crew Information -->
      <div class="form-section">
        <h2 class="section-title">
          <i>üë∑</i> Crew Information
        </h2>
        
        <table id="crew-table">
          <thead>
            <tr>
              <th>Name / Nombre</th>
              <th>Role / Rol</th>
              <th>Hours / Horas</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><input type="text"></td>
              <td><input type="text"></td>
              <td>
                <select class="hour-select">
                  <option>0</option>
                  <option>1</option>
                  <option>2</option>
                  <option>3</option>
                  <option>4</option>
                  <option>5</option>
                  <option>6</option>
                  <option>7</option>
                  <option>8</option>
                  <option>9</option>
                  <option>10</option>
                  <option>11</option>
                  <option>12</option>
                </select>
              </td>
            </tr>
            <tr>
              <td><input type="text"></td>
              <td><input type="text"></td>
              <td>
                <select class="hour-select">
                  <option>0</option>
                  <option>1</option>
                  <option>2</option>
                  <option>3</option>
                  <option>4</option>
                  <option>5</option>
                  <option>6</option>
                  <option>7</option>
                  <option>8</option>
                  <option>9</option>
                  <option>10</option>
                  <option>11</option>
                  <option>12</option>
                </select>
              </td>
            </tr>
          </tbody>
        </table>
        
        <div class="btn-group">
          <button class="btn btn-primary no-print" onclick="addCrewMember()">
            <i>‚ûï</i> Add Crew Member
          </button>
        </div>
      </div>
      
      <!-- Final Notes -->
      <div class="form-section">
        <h2 class="section-title">
          <i>üìù</i> Final Notes
        </h2>
        
        <div class="input-group">
          <label>Additional Notes / Notas Adicionales</label>
          <textarea id="additional-notes"></textarea>
        </div>
      </div>
      
      <!-- Action Buttons -->
      <div class="btn-group">
        <button class="btn btn-primary no-print" onclick="savePDF()">
          <i>üíæ</i> Save as PDF
        </button>
        <button class="btn no-print" style="background: #4a5568; color: white;" onclick="window.print()">
          <i>üñ®Ô∏è</i> Print Form
        </button>
        <button class="btn no-print" style="background: #38a169; color: white;" onclick="clearForm()">
          <i>üßπ</i> Clear Form
        </button>
      </div>
    </div>
    
    <footer class="footer">
      Concrete Job Form v2.0 | ¬© 2023 Construction Pro Tools
    </footer>
  </div>

  <script>
    // Set today's date
    document.getElementById('date').value = new Date().toLocaleDateString();
    
    // Handle concrete company selection
    document.getElementById('concrete-company').addEventListener('change', function() {
      const otherField = document.getElementById('other-company');
      otherField.disabled = this.value !== 'other';
      if (this.value !== 'other') otherField.value = '';
    });
    
    // Save as PDF function
    function savePDF() {
      // Hide non-printable elements
      const noPrintElements = document.querySelectorAll('.no-print');
      noPrintElements.forEach(el => el.style.display = 'none');
      
      const element = document.getElementById('form-root');
      
      // Create a clone to preserve original styles
      const clone = element.cloneNode(true);
      clone.style.width = '100%';
      clone.style.overflow = 'visible';
      document.body.appendChild(clone);
      
      const opt = {
        margin: 0.3,
        filename: 'concrete_job_form.pdf',
        pagebreak: { mode: ['avoid-all', 'css'], before: '.section' },
        html2canvas: {
          scale: 2,
          useCORS: true,
          scrollY: 0,
          windowHeight: clone.scrollHeight
        },
        jsPDF: { 
          unit: 'in', 
          format: 'letter', 
          orientation: 'portrait',
          hotfixes: ['px_scaling']
        }
      };

      // Generate PDF
      html2pdf()
        .set(opt)
        .from(clone)
        .save()
        .then(() => {
          // Clean up and restore UI
          document.body.removeChild(clone);
          noPrintElements.forEach(el => el.style.display = '');
        })
        .catch(err => {
          console.error('PDF generation failed:', err);
          document.body.removeChild(clone);
          noPrintElements.forEach(el => el.style.display = '');
          alert('Failed to generate PDF. Please try again.');
        });
    }
    
    // Clear form function
    function clearForm() {
      if (confirm('Are you sure you want to clear all form data?')) {
        document.querySelectorAll('input:not([type=button]):not([type=submit]), textarea, select').forEach(el => {
          if (el.type === 'checkbox' || el.type === 'radio') {
            el.checked = false;
          } else if (el.tagName === 'SELECT') {
            el.selectedIndex = 0;
          } else {
            el.value = '';
          }
        });
        // Reset date
        document.getElementById('date').value = new Date().toLocaleDateString();
      }
    }
    
    // Add equipment row
    function addEquipmentRow() {
      const table = document.getElementById('equipment-table');
      const row = table.insertRow(-1);
      row.innerHTML = `
        <td><input type="text"></td>
        <td>
          <select class="hour-select">
            <option>0</option>
            <option>0.5</option>
            <option>1.0</option>
            <option>1.5</option>
            <option>2.0</option>
            <option>2.5</option>
            <option>3.0</option>
            <option>3.5</option>
            <option>4.0</option>
            <option>4.5</option>
            <option>5.0</option>
            <option>5.5</option>
            <option>6.0</option>
            <option>6.5</option>
            <option>7.0</option>
            <option>7.5</option>
            <option>8.0</option>
          </select>
        </td>
        <td><input type="text"></td>
      `;
    }
    
    // Add crew member
    function addCrewMember() {
      const table = document.getElementById('crew-table');
      const row = table.insertRow(-1);
      row.innerHTML = `
        <td><input type="text"></td>
        <td><input type="text"></td>
        <td>
          <select class="hour-select">
            <option>0</option>
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
            <option>6</option>
            <option>7</option>
            <option>8</option>
            <option>9</option>
            <option>10</option>
            <option>11</option>
            <option>12</option>
          </select>
        </td>
      `;
    }
    
    // Section management
    let sectionCount = 1;
    
    function addSection() {
      sectionCount++;
      const template = document.getElementById('section-1').cloneNode(true);
      template.id = 'section-' + sectionCount;
      
      // Clear inputs in the new section
      template.querySelectorAll('input:not([type=button]), textarea, select').forEach(el => {
        if (el.type === 'checkbox') {
          el.checked = false;
        } else {
          el.value = '';
        }
      });
      
      // Update section number
      template.querySelector('.section-number').textContent = `Section ${sectionCount}`;
      
      // Update IDs for section-specific elements
      ['single-mat-', 'double-mat-'].forEach(prefix => {
        const el = template.querySelector(`[id^="${prefix}"]`);
        if (el) {
          el.id = prefix + sectionCount;
          const label = template.querySelector(`label[for^="${prefix}"]`);
          if (label) label.htmlFor = el.id;
        }
      });
      
      document.getElementById('sections-container').appendChild(template);
    }
    
    function removeSection(section) {
      const sections = document.querySelectorAll('.section');
      if (sections.length > 1) {
        section.remove();
      } else {
        alert('You need at least one section');
      }
    }
  </script>
</body>
</html>
